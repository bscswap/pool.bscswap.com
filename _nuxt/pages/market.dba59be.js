(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{295:function(t,n,e){var content=e(663);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(40).default)("95939728",content,!0,{sourceMap:!1})},662:function(t,n,e){"use strict";var r=e(295);e.n(r).a},663:function(t,n,e){(n=e(39)(!1)).push([t.i,".market[data-v-782c423c]{display:flex;flex-direction:column;align-items:center;justify-content:center}.form[data-v-782c423c]{position:relative;max-width:820px;width:100%;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.125);border-radius:.25rem;padding:2rem}.form[data-v-782c423c],.transaction[data-v-782c423c]{margin-bottom:40px}h1[data-v-782c423c]{font-size:22px;margin-bottom:20px}.input-body[data-v-782c423c]{display:flex;align-items:flex-start}.input-body .input[data-v-782c423c]{width:calc(100% - 200px)}.left-label[data-v-782c423c]{width:100%;text-align:center;display:flex;justify-content:space-between}.left-label span[data-v-782c423c]{color:#565a69}.arrow-down[data-v-782c423c]{height:100px;display:flex;justify-content:center;font-size:23px}.submit-button[data-v-782c423c]{width:200px;margin-left:20px;border-color:#fb0;color:#fb0;margin-top:32px}.btn-outline-secondary[data-v-782c423c]:hover{color:#fff;background-color:#fb0;border-color:#fb0}.address-item[data-v-782c423c]{margin-bottom:10px}.address-item[data-v-782c423c]:hover{color:#fb0;text-decoration:underline;cursor:pointer}",""]),t.exports=n},672:function(t,n,e){"use strict";e.r(n);e(20);var r=e(3),c=(e(200),e(217)),o=e(261),l=e(220),d=e(88),f=e(38),m={name:"market",data:function(){return{bnb_amount:"",wbnb_amount:"",bnb_balance:"-",wbnb_balance:"-",transactions:[]}},computed:{erc20:function(){var t=f.default.tokens.find((function(t){return"bnb"==t.symbol}));return t&&this.$store.state.connectedAccount?new o.d(t.address):""},wbnb:function(){var t=f.default.tokens.find((function(t){return"bnb"==t.symbol}));return t&&this.$store.state.connectedAccount?new o.g(t.address):""},bnbState:function(){return this.bnb_amount?new c.BigNumber(this.bnb_amount).gt(0):null},wbnbState:function(){return this.wbnb_amount?new c.BigNumber(this.wbnb_amount).gt(0):null}},watch:{erc20:function(t){t&&this.getBnbBalance()},wbnb:function(t){var n=this;t&&this.getWbnbBalance().then((function(data){n.wbnb_balance=data}))}},methods:{etherscanTx:function(t){return d.a.etherscanTx(t)},getBnbBalance:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.erc20){n.next=5;break}return e=new o.BNB,n.next=4,e.balanceOf(t.$store.state.connectedAccount);case 4:t.bnb_balance=n.sent;case 5:case"end":return n.stop()}}),n)})))()},getWbnbBalance:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.wbnb){n.next=5;break}return n.next=3,t.wbnb.balanceOf(t.$store.state.connectedAccount);case 3:return e=n.sent,n.abrupt("return",e?e.toNumber():"-");case 5:return n.abrupt("return","-");case 6:case"end":return n.stop()}}),n)})))()},swapBnb:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$store.state.connectedAccount&&(e=f.default.tokens.find((function(t){return"bnb"==t.symbol})),t.wbnb.withdraw(t.$store.state.connectedAccount,e.address,t.wbnb_amount,(function(n,e){if(n)t.$bvToast.toast(error,{title:t.$t("market.error"),solid:!0});else{t.transactions.push(e);var r=t,c=setInterval((function(){o.h.eth.getTransactionReceipt(e,(function(t,n){n&&(r.getBnbBalance(),r.getWbnbBalance().then((function(data){r.wbnb_balance=data})),clearInterval(c))}))}),2e3)}})));case 1:case"end":return n.stop()}}),n)})))()},swapWbnb:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var e,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$store.state.connectedAccount&&(e=f.default.tokens.find((function(t){return"bnb"==t.symbol})),r={from:t.$store.state.connectedAccount,to:e.address,value:Object(l.toBN)(new c.BigNumber(t.bnb_amount).shiftedBy(18)),gasPrice:Object(l.toBN)(2e10),gas:7e4},web3Writer.eth.sendTransaction(r,(function(n,e){if(n)t.$bvToast.toast(error,{title:t.$t("market.error"),solid:!0});else{t.transactions.push(e);var r=t,c=setInterval((function(){o.h.eth.getTransactionReceipt(e,(function(t,n){n&&(r.getBnbBalance(),r.getWbnbBalance().then((function(data){r.wbnb_balance=data})),clearInterval(c))}))}),2e3)}})));case 1:case"end":return n.stop()}}),n)})))()}},created:function(){var t=this;this.getBnbBalance(),this.getWbnbBalance().then((function(data){t.wbnb_balance=data}))}},v=(e(662),e(28)),component=Object(v.a)(m,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"market"},[e("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.$t("market.tip")))]),t._v(" "),e("h1",[t._v(t._s(t.$t("market.title-swap")))]),t._v(" "),e("div",{staticClass:"form"},[e("div",{staticClass:"input-body top"},[e("div",{staticClass:"input",attrs:{role:"group"}},[e("label",{staticClass:"left-label",attrs:{for:"input-live"}},[t._v(t._s(t.$t("market.from",{symbol:"BNB"}))),e("span",[t._v(t._s(t.$t("market.balance",{balance:t.bnb_balance})))])]),t._v(" "),e("b-input",{attrs:{state:t.bnbState,placeholder:t.$t("market.amount"),trim:""},model:{value:t.bnb_amount,callback:function(n){t.bnb_amount=n},expression:"bnb_amount"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[t._v(t._s(t.$t("market.greather-than")))])],1),t._v(" "),e("b-button",{staticClass:"submit-button",attrs:{variant:"outline-secondary"},on:{click:t.swapWbnb}},[t._v(t._s(t.$t("market.swap",{symbol:"WBNB"})))])],1),t._v(" "),e("div",{staticClass:"arrow-down"}),t._v(" "),e("div",{staticClass:"input-body top"},[e("div",{staticClass:"input",attrs:{role:"group"}},[e("label",{staticClass:"left-label",attrs:{for:"input-live"}},[t._v(t._s(t.$t("market.from",{symbol:"WBNB"}))),e("span",[t._v(t._s(t.$t("market.balance",{balance:t.wbnb_balance})))])]),t._v(" "),e("b-input",{attrs:{state:t.wbnbState,placeholder:t.$t("market.amount"),trim:""},model:{value:t.wbnb_amount,callback:function(n){t.wbnb_amount=n},expression:"wbnb_amount"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[t._v(t._s(t.$t("market.greather-than")))])],1),t._v(" "),e("b-button",{staticClass:"submit-button",attrs:{variant:"outline-secondary"},on:{click:t.swapBnb}},[t._v(t._s(t.$t("market.swap",{symbol:"BNB"})))])],1)]),t._v(" "),t.transactions.length>0?e("h1",[t._v(t._s(t.$t("market.title-transaction")))]):t._e(),t._v(" "),t.transactions.length>0?e("div",{staticClass:"transaction"},t._l(t.transactions,(function(n,i){return e("div",{key:i,staticClass:"address-item"},[e("a",{attrs:{href:t.etherscanTx(n),target:"_blank"}},[t._v(" "+t._s(n))])])})),0):t._e()])}),[],!1,null,"782c423c",null);n.default=component.exports}}]);